```sql
-- Existing tables with all original details preserved
CREATE TABLE public.base_configurations (
    id bigint GENERATED ALWAYS AS IDENTITY,
    config_key text NOT NULL,
    config_value text NOT NULL,
    created_at timestamp with time zone NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp with time zone NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT base_configurations_pkey PRIMARY KEY (id),
    CONSTRAINT base_configurations_config_key_key UNIQUE (config_key)
) TABLESPACE pg_default;

CREATE TABLE public.custom_endpoints (
    id serial,
    path character varying(255) NOT NULL,
    method character varying(10) NOT NULL,
    model character varying(255) NOT NULL,
    prompt_template text NOT NULL,
    created_at timestamp without time zone NULL DEFAULT CURRENT_TIMESTAMP,
    strategy text NULL,
    "codeGen" text NULL,
    "apiKey" text NULL,
    CONSTRAINT custom_endpoints_pkey PRIMARY KEY (id),
    CONSTRAINT custom_endpoints_path_key UNIQUE (path)
) TABLESPACE pg_default;

CREATE TABLE public.logs (
    id serial,
    prompt text NOT NULL,
    response text NOT NULL,
    model character varying(255) NOT NULL,
    created_at timestamp without time zone NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT logs_pkey PRIMARY KEY (id)
) TABLESPACE pg_default;

CREATE TABLE public.api_key (
    id bigint GENERATED BY DEFAULT AS IDENTITY,
    key uuid NOT NULL DEFAULT gen_random_uuid(),
    "userKey" text NULL,
    strategies json NOT NULL DEFAULT '{"type": "*"}'::json,
    CONSTRAINT api_key_pkey PRIMARY KEY (id)
) TABLESPACE pg_default;

-- New table for schema versioning
CREATE TABLE public.schema_versions (
    id SERIAL PRIMARY KEY,
    version VARCHAR(50) NOT NULL,
    applied_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
) TABLESPACE pg_default;

-- Stored procedure to create schema_versions table if it doesn't exist
CREATE OR REPLACE FUNCTION create_schema_versions_if_not_exists()
RETURNS void AS $$
BEGIN
    CREATE TABLE IF NOT EXISTS public.schema_versions (
        id SERIAL PRIMARY KEY,
        version VARCHAR(50) NOT NULL,
        applied_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
    ) TABLESPACE pg_default;
END;
$$ LANGUAGE plpgsql;

-- Stored procedure to apply a migration
CREATE OR REPLACE FUNCTION apply_migration(migration_sql TEXT)
RETURNS void AS $$
BEGIN
    EXECUTE migration_sql;
END;
$$ LANGUAGE plpgsql;
```